# Agent manifest for BeeAI AgentStack
# This file describes the agent for discovery and deployment

name: scale-agents
version: 1.0.0
description: |
  IBM Storage Scale AI Agent for cluster management, health monitoring, 
  storage operations, quota management, and administration.
  
  This agent provides a unified interface to IBM Storage Scale clusters,
  with intelligent routing to specialized capabilities for health monitoring,
  storage management, quota handling, performance analysis, and administration.

# Agent metadata
metadata:
  author: IBM Storage Team
  license: Apache-2.0
  homepage: https://github.com/c0mpiler/storage-scale-agents
  documentation: https://github.com/c0mpiler/storage-scale-agents#readme
  tags:
    - storage
    - ibm
    - gpfs
    - infrastructure
    - monitoring
    - administration
    - mcp

# Runtime configuration
runtime:
  # Container deployment
  type: container
  image: scale-agents:latest
  
  # Build from source
  dockerfile: Dockerfile
  
  # Entry point
  command: ["python", "-m", "scale_agents.server"]
  
  # Health check
  healthcheck:
    path: /health
    interval: 30s
    timeout: 10s
    retries: 3

# Server configuration (AgentStack standard port)
server:
  host: 0.0.0.0
  port: 10000
  protocol: http

# Single agent (AgentStack SDK constraint: one agent per server)
agents:
  - name: scale_agent
    description: |
      IBM Storage Scale Agent for comprehensive cluster management.
      
      Routes requests to specialized internal handlers:
      - Health: Cluster health, node status, events, diagnostics
      - Storage: Filesystems, filesets, storage pools, NSDs
      - Quota: Quota management, capacity monitoring, usage reports
      - Performance: Metrics analysis, bottleneck detection
      - Admin: Snapshots, policies, node management, cluster admin
      
      Examples:
        "Show cluster health" -> Health handler
        "List all filesystems" -> Storage handler
        "What's the quota for fileset data01?" -> Quota handler
        "Analyze performance bottlenecks" -> Performance handler
        "Create a snapshot of fs01" -> Admin handler
    capabilities:
      - health_monitoring
      - storage_management
      - quota_management
      - performance_analysis
      - cluster_administration
      - snapshot_management
      - node_lifecycle
      - remote_cluster_management

# Required environment variables
env:
  required:
    - name: SCALE_AGENTS_MCP_SERVER_URL
      description: URL of the scale-mcp-server endpoint
      example: http://localhost:8000/mcp
      
  optional:
    - name: SCALE_AGENTS_LLM_ENABLED
      description: Enable LLM reasoning layer
      default: "false"
      
    - name: SCALE_AGENTS_LLM_PROVIDER
      description: LLM provider (ollama, openai, anthropic)
      
    - name: SCALE_AGENTS_LLM_MODEL
      description: LLM model name
      
    - name: SCALE_AGENTS_REQUIRE_CONFIRMATION
      description: Require confirmation for destructive operations
      default: "true"

# Dependencies
dependencies:
  services:
    - name: scale-mcp-server
      description: IBM Storage Scale MCP Server
      url: http://localhost:8000/mcp
      required: true

# Resource requirements
resources:
  cpu: 0.5
  memory: 512Mi
  limits:
    cpu: 2
    memory: 2Gi
